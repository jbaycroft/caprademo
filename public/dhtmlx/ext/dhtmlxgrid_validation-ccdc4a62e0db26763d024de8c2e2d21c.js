//v.3.5 build 120822
/*
Copyright DHTMLX LTD. http://www.dhtmlx.com
You allowed to use this component or parts of it under GPL terms
To use it on other terms or get Professional edition of the component please contact us at sales@dhtmlx.com
*/
dhtmlxValidation=function(){},dhtmlxValidation.prototype={trackInput:function(e,t,n,r){dhtmlxEvent(e,"keyup",function(){dhtmlxValidation._timer&&(window.clearTimeout(dhtmlxValidation._timer),dhtmlxValidation._timer=null),dhtmlxValidation._timer=window.setTimeout(function(){if(dhtmlxValidation.checkInput(e,t))e.className=e.className.replace(/[ ]*dhtmlx_live_validation_error/g,""),r&&r(e,e.value,t);else if(!n||n(e,e.value,t))e.className+=" dhtmlx_live_validation_error"},250)})},checkInput:function(e,t){return this.checkValue(e.value,t)},checkValue:function(e,t){typeof t=="string"&&(t=t.split(","));for(var n=!0,r=0;r<t.length;r++)this["is"+t[r]]?n=n&&this["is"+t[r]](e):alert("Incorrect validation rule: "+t[r]);return n},isEmpty:function(e){return e==""},isNotEmpty:function(e){return!e==""},isValidBoolean:function(e){return!!e.toString().match(/^(0|1|true|false)$/)},isValidEmail:function(e){return!!e.toString().match(/(^[a-z0-9]([0-9a-z\-_\.]*)@([0-9a-z_\-\.]*)([.][a-z]{3})$)|(^[a-z]([0-9a-z_\.\-]*)@([0-9a-z_\-\.]*)(\.[a-z]{2,4})$)/i)},isValidInteger:function(e){return!!e.toString().match(/(^-?\d+$)/)},isValidNumeric:function(e){return!!e.toString().match(/(^-?\d\d*[\.|,]\d*$)|(^-?\d\d*$)|(^-?[\.|,]\d\d*$)/)},isValidAplhaNumeric:function(e){return!!e.toString().match(/^[_\-a-z0-9]+$/gi)},isValidDatetime:function(e){var t=e.toString().match(/^(\d{4})-(\d{2})-(\d{2})\s(\d{2}):(\d{2}):(\d{2})$/);return t&&t[1]<=9999&&t[2]<=12&&t[3]<=31&&t[4]<=59&&t[5]<=59&&t[6]<=59||!1},isValidDate:function(e){var t=e.toString().match(/^(\d{4})-(\d{2})-(\d{2})$/);return t&&t[1]<=9999&&t[2]<=12&&t[3]<=31||!1},isValidTime:function(e){var t=e.toString().match(/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/);return t&&t[1]<=24&&t[2]<=59&&t[3]<=59||!1},isValidIPv4:function(e){var t=e.toString().match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/);return t&&t[1]<=255&&t[2]<=255&&t[3]<=255&&t[4]<=255||!1},isValidCurrency:function(e){return e.toString().match(/^\$?\s?\d+?[\.,\,]?\d+?\s?\$?$/)&&!0||!1},isValidSSN:function(e){return e.toString().match(/^\d{3}\-?\d{2}\-?\d{4}$/)&&!0||!1},isValidSIN:function(e){return e.toString().match(/^\d{9}$/)&&!0||!1}},dhtmlxValidation=new dhtmlxValidation,dhtmlXGridObject.prototype.enableValidation=function(e,t){this._validators=(e=convertStringToBoolean(e))?{data:[]}:!1,arguments.length>1&&(this._validators._live=t),this._validators._event||(this._validators._event=this.attachEvent("onEditCell",this.validationEvent))},dhtmlXGridObject.prototype.setColValidators=function(e){this._validators||this.enableValidation(!0),typeof e=="string"&&(e=e.split(this.delim)),this._validators.data=e},dhtmlXGridObject.prototype.validationEvent=function(e,t,n,r){var i=this._validators;if(!i)return!0;var s=i.data[n]||this.cells(t,n).getAttribute("validate")||"";if(e==1&&s){var o=this.editor||(this._fake||{}).editor;if(!o)return!0;o.cell.className=o.cell.className.replace(/[ ]*dhtmlx_validation_error/g,"");if(i._live){var u=this;dhtmlxValidation.trackInput(o.getInput(),s,function(e,r,i){return u.callEvent("onLiveValidationError",[t,n,r,e,i])},function(e,r,i){return u.callEvent("onLiveValidationCorrect",[t,n,r,e,i])})}}return e==2&&this.validateCell(t,n,s,r),!0},dhtmlXGridObject.prototype.validateCell=function(e,t,n,r){n=n||this._validators.data[t]||this.cells(e,t).getAttribute("validate"),r=r||this.cells(e,t).getValue();if(n){var i=this.cells(e,t).cell,s=!0;typeof n=="string"&&(n=n.split(this.delim));for(var o=0;o<n.length;o++)dhtmlxValidation.checkValue(r,n[o])||(this.callEvent("onValidationError",[e,t,r,n[o]])&&(i.className+=" dhtmlx_validation_error"),s=!1);return s&&(this.callEvent("onValidationCorrect",[e,t,r,n]),i.className=i.className.replace(/[ ]*dhtmlx_validation_error/g,"")),s}};